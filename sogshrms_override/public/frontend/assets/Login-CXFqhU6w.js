var V=(x,m,i)=>new Promise((h,g)=>{var r=t=>{try{u(i.next(t))}catch(p){g(p)}},l=t=>{try{u(i.throw(t))}catch(p){g(p)}},u=t=>t.done?h(t.value):Promise.resolve(t.value).then(r,l);u((i=i.apply(x,m)).next())});import{f as v,j as f,q as e,r as w,O as k,N as I,z as O,l as c,i as D,k as n,x as a,t as d,a3 as C,a6 as P,Y as _,a7 as j,X as M,n as L,F as R,H as U,y as z}from"./frappe-ui-CCawzUO5.js";import{I as $,a as N,b as S}from"./index-86FMwWe0.js";const F="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M432 448a15.92 15.92 0 01-11.31-4.69l-352-352a16 16 0 0122.62-22.62l352 352A16 16 0 01432 448zM255.66 384c-41.49 0-81.5-12.28-118.92-36.5-34.07-22-64.74-53.51-88.7-91v-.08c19.94-28.57 41.78-52.73 65.24-72.21a2 2 0 00.14-2.94L93.5 161.38a2 2 0 00-2.71-.12c-24.92 21-48.05 46.76-69.08 76.92a31.92 31.92 0 00-.64 35.54c26.41 41.33 60.4 76.14 98.28 100.65C162 402 207.9 416 255.66 416a239.13 239.13 0 0075.8-12.58 2 2 0 00.77-3.31l-21.58-21.58a4 4 0 00-3.83-1 204.8 204.8 0 01-51.16 6.47zM490.84 238.6c-26.46-40.92-60.79-75.68-99.27-100.53C349 110.55 302 96 255.66 96a227.34 227.34 0 00-74.89 12.83 2 2 0 00-.75 3.31l21.55 21.55a4 4 0 003.88 1 192.82 192.82 0 0150.21-6.69c40.69 0 80.58 12.43 118.55 37 34.71 22.4 65.74 53.88 89.76 91a.13.13 0 010 .16 310.72 310.72 0 01-64.12 72.73 2 2 0 00-.15 2.95l19.9 19.89a2 2 0 002.7.13 343.49 343.49 0 0068.64-78.48 32.2 32.2 0 00-.1-34.78z'/><path d='M256 160a95.88 95.88 0 00-21.37 2.4 2 2 0 00-1 3.38l112.59 112.56a2 2 0 003.38-1A96 96 0 00256 160zM165.78 233.66a2 2 0 00-3.38 1 96 96 0 00115 115 2 2 0 001-3.38z'/></svg>",H="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M255.66 112c-77.94 0-157.89 45.11-220.83 135.33a16 16 0 00-.27 17.77C82.92 340.8 161.8 400 255.66 400c92.84 0 173.34-59.38 221.79-135.25a16.14 16.14 0 000-17.47C428.89 172.28 347.8 112 255.66 112z' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><circle cx='256' cy='256' r='80' stroke-miterlimit='10' class='ionicon-fill-none ionicon-stroke-width'/></svg>",T="/assets/sogshrms_override/frontend/assets/login-logo-BTDC-i58.png",E=["src"],A={__name:"FrappeHRLogo",setup(x){return(m,i)=>(f(),v("img",{src:e(T),alt:"Frappe HR Logo",class:"h-full w-full object-contain max-w-[70px] max-h-[70px]"},null,8,E))}},G={class:"flex h-screen w-screen flex-col justify-center bg-white"},Y={class:"flex flex-col mx-auto gap-3 items-center"},q={class:"text-3xl font-semibold text-gray-900 text-center"},X={class:"mx-auto mt-10 w-full px-8 sm:w-96"},J={class:"relative"},K={class:"space-y-4"},Q=["href"],W=["src","alt"],Z={class:"text-lg font-bold"},ee=["href"],oe={class:"text-lg font-bold"},te={key:0,class:"mb-4"},ne={__name:"Login",setup(x){const m=w(null),i=w(null),h=w(""),g=w(!1),r=k({showDialog:!1,link:""}),l=k({showDialog:!1,tmp_id:"",code:"",verification:{}}),u=D("$session"),t=D("$translate");function p(B){return V(this,null,function*(){try{let o;l.showDialog?o=yield u.otp(l.tmp_id,l.code):o=yield u.login(m.value,i.value),o.message==="Password Reset"?(r.showDialog=!0,r.link=o.redirect_to):(r.showDialog=!1,r.link=""),o.verification&&(o.verification.setup?(l.showDialog=!0,l.tmp_id=o.tmp_id,l.verification=o.verification):window.open("/login?redirect-to="+encodeURIComponent(window.location.pathname),"_blank"))}catch(o){h.value=o.messages.join(`
`)}})}const b=I({url:"hrms.api.oauth.oauth_providers",auto:!0});return(B,o)=>(f(),O(e($),null,{default:c(()=>[n(e(N),{class:"ion-padding"},{default:c(()=>{var y;return[a("div",G,[a("div",Y,[n(A,{class:"h-10 w-10"}),a("div",q,d(e(t)("Login to SOGS HR")),1)]),a("div",X,[a("form",{class:"flex flex-col space-y-4",onSubmit:P(p,["prevent"])},[n(e(_),{label:e(t)("Email"),placeholder:e(t)("johndoe@mail.com"),modelValue:m.value,"onUpdate:modelValue":o[0]||(o[0]=s=>m.value=s),type:"text",autocomplete:"username"},null,8,["label","placeholder","modelValue"]),a("div",J,[n(e(_),{label:e(t)("Password"),type:g.value?"text":"password",placeholder:"••••••",modelValue:i.value,"onUpdate:modelValue":o[1]||(o[1]=s=>i.value=s),autocomplete:"current-password"},null,8,["label","type","modelValue"]),a("button",{type:"button",class:"absolute right-3 top-7 text-gray-500 hover:text-gray-700",onClick:o[2]||(o[2]=s=>g.value=!g.value)},[n(e(S),{icon:g.value?e(F):e(H)},null,8,["icon"])])]),n(e(j),{message:h.value},null,8,["message"]),n(e(M),{loading:e(u).login.loading,variant:"solid",class:"disabled:bg-gray-700 disabled:text-white !mt-6"},{default:c(()=>[L(d(e(t)("Login")),1)]),_:1},8,["loading"])],32),(y=e(b).data)!=null&&y.length?(f(),v(R,{key:0},[o[6]||(o[6]=a("div",{class:"text-center text-sm text-gray-600 my-4"},"or",-1)),a("div",K,[(f(!0),v(R,null,U(e(b).data,s=>(f(),v("a",{key:s.name,class:"flex items-center justify-center gap-2 transition-colors focus:outline-none text-gray-800 bg-gray-100 hover:bg-gray-200 active:bg-gray-300 focus-visible:ring focus-visible:ring-gray-400 h-7 text-base p-2 rounded",href:s.auth_url},[a("img",{class:"h-4 w-4",src:s.icon,alt:s.provider_name},null,8,W),a("span",null,"Login with "+d(s.provider_name),1)],8,Q))),128))])],64)):C("",!0)])]),n(e(z),{modelValue:r.showDialog,"onUpdate:modelValue":o[3]||(o[3]=s=>r.showDialog=s)},{"body-title":c(()=>[a("h2",Z,d(e(t)("Reset Password")),1)]),"body-content":c(()=>[a("p",null,d(e(t)("Your password has expired. Please reset your password to continue")),1)]),actions:c(()=>[a("a",{class:"inline-flex items-center justify-center gap-2 transition-colors focus:outline-none text-white bg-gray-900 hover:bg-gray-800 active:bg-gray-700 focus-visible:ring focus-visible:ring-gray-400 h-7 text-base px-2 rounded",href:r.link,target:"_blank"},d(e(t)("Go to Reset Password page")),9,ee)]),_:1},8,["modelValue"]),n(e(z),{modelValue:l.showDialog,"onUpdate:modelValue":o[5]||(o[5]=s=>l.showDialog=s)},{"body-title":c(()=>[a("h2",oe,d(e(t)("OTP Verification")),1)]),"body-content":c(()=>[l.verification.prompt?(f(),v("p",te,d(l.verification.prompt),1)):C("",!0),a("form",{class:"flex flex-col space-y-4",onSubmit:P(p,["prevent"])},[n(e(_),{label:e(t)("OTP Code"),type:"text",placeholder:"000000",modelValue:l.code,"onUpdate:modelValue":o[4]||(o[4]=s=>l.code=s),autocomplete:"one-time-code"},null,8,["label","modelValue"]),n(e(j),{message:h.value},null,8,["message"]),n(e(M),{loading:e(u).otp.loading,variant:"solid",class:"disabled:bg-gray-700 disabled:text-white !mt-6"},{default:c(()=>[L(d(e(t)("Verify")),1)]),_:1},8,["loading"])],32)]),_:1},8,["modelValue"])]}),_:1})]),_:1}))}};export{ne as default};
//# sourceMappingURL=Login-CXFqhU6w.js.map
